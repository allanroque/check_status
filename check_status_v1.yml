---
- name: Check URLs and Generate Status Page
  hosts: automation_controller
  gather_facts: no
  vars:
    urls:
      - "https://www.ansible.com/"
      - "https://access.redhat.com/"
      - "https://developers.redhat.com/"
    html_output: "/opt/local/html/index.html"

  tasks:
    - name: Check URLs status
      uri:
        url: "{{ item }}"
        method: GET
        return_content: false
      register: http_responses
      loop: "{{ urls }}"
      ignore_errors: true

    - name: Generate HTML content
      template:
        src: 
        dest: "{{ html_output }}"
        mode: '0644'

    - name: Print results to console (optional)
      debug:
        msg: "{{ item.item }} - {{ item.status }}"
      loop: "{{ http_responses.results }}"
